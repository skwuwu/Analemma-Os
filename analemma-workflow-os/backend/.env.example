# =============================================================================
# Analema Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env files to version control

# =============================================================================
# AWS Configuration
# =============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here

# DynamoDB Tables
EXECUTIONS_TABLE=Executions
WORKFLOWS_TABLE=Workflows
USERS_TABLE=Users
TASK_TOKEN_TABLE=TaskTokens
IDEMPOTENCY_TABLE=Idempotency
WEBSOCKET_CONNECTIONS_TABLE=WebsocketConnections
PENDING_NOTIFICATIONS_TABLE=PendingNotifications
USER_USAGE_TABLE=UserUsage
BEDROCK_JOB_TABLE=BedrockJobs
CHECKPOINTS_TABLE=Checkpoints
SKILLS_TABLE=Skills

# Intelligent Instruction Distiller Tables
CORRECTION_LOGS_TABLE=CorrectionLogs
DISTILLED_INSTRUCTIONS_TABLE=DistilledInstructions
CONFIRMATION_TOKENS_TABLE=ConfirmationTokens
OWNER_INDEX=OwnerIdIndex
NOTIFICATIONS_INDEX=NotificationsIndex

# S3 Configuration
SKELETON_S3_BUCKET=your-skeleton-bucket
SKELETON_S3_PREFIX=skeletons/

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here

# AWS Bedrock Configuration (alternative to OpenAI)
BEDROCK_REGION=us-east-1
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0

# =============================================================================
# Redis Configuration (Optional - for token storage)
# =============================================================================
# If REDIS_URL is set, Redis will be used for confirmation tokens
# Otherwise, DynamoDB will be used
REDIS_URL=redis://localhost:6379

# =============================================================================
# Security Configuration
# =============================================================================
# Database query execution (SECURITY CRITICAL)
# Set to "true" only in development environments
# NEVER set to "true" in production
ALLOW_DB_QUERY=false

# Application environment
APP_ENV=development

# JWT/Auth Configuration
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRATION=24h

# =============================================================================
# Model Router Configuration
# =============================================================================
# Cost optimization settings
ENABLE_MODEL_ROUTING=true
HIGH_PERFORMANCE_MODEL=anthropic.claude-3-5-sonnet-20241022-v2:0
STANDARD_MODEL=anthropic.claude-3-haiku-20240307-v1:0

# Complexity thresholds for model selection
COMPLEXITY_THRESHOLD_HIGH=0.7
COMPLEXITY_THRESHOLD_MEDIUM=0.4

# =============================================================================
# Execution Configuration
# =============================================================================
# Step Functions
STATE_MACHINE_ARN=arn:aws:states:us-east-1:123456789012:stateMachine:YourStateMachine

# Execution limits
MAX_EXECUTION_TIME_SECONDS=3600
MAX_NODES_PER_WORKFLOW=100
MAX_PARALLEL_EXECUTIONS=10

# =============================================================================
# Monitoring and Logging
# =============================================================================
LOG_LEVEL=INFO
ENABLE_DETAILED_LOGGING=true

# CloudWatch Configuration
CLOUDWATCH_LOG_GROUP=/aws/lambda/analema-backend
CLOUDWATCH_LOG_STREAM=main

# =============================================================================
# Feature Flags
# =============================================================================
# Canvas mode switching
ENABLE_CANVAS_MODE_SWITCHING=true

# Time machine features
ENABLE_TIME_MACHINE=true
ENABLE_ROLLBACK=true

# Plan briefing
ENABLE_PLAN_BRIEFING=true
BRIEFING_CONFIRMATION_REQUIRED=true

# Mock mode for development
MOCK_MODE=false

# =============================================================================
# External Integrations
# =============================================================================
# Email service (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# Webhook endpoints
WEBHOOK_BASE_URL=https://your-domain.com/webhooks

# =============================================================================
# Development Settings
# =============================================================================
# CORS settings for development
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Debug settings
DEBUG=false
ENABLE_PROFILING=false

# Test database (for running tests)
TEST_EXECUTIONS_TABLE=TestExecutions
TEST_WORKFLOWS_TABLE=TestWorkflows