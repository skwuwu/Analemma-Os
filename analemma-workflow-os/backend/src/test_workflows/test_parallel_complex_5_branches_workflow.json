{
    "workflow_name": "Complex Parallel 5 Branches Test",
    "description": "5개 브랜치로 Child Workflow 트리거 테스트 - _should_use_child_workflow 로직 검증",
    "nodes": [
        {
            "id": "parallel_prep",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "parallel_test_started"
            }
        },
        {
            "id": "parallel_prep_2",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": 5,
                "output_key": "expected_branches"
            }
        },
        {
            "id": "parallel_prep_3",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "expected_child_workflow"
            }
        },
        {
            "id": "parallel_prep_4",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": {
                    "test_type": "parallel_complex_5_branches",
                    "branch_count": 5,
                    "should_use_child_workflow": true
                },
                "output_key": "prep_result"
            }
        },
        {
            "id": "complex_parallel_group",
            "type": "parallel_group",
            "config": {
                "branches": [
                    {
                        "branch_id": "branch_1",
                        "total_segments": 15,
                        "partition_map": {
                            "seg_1_1": {
                                "type": "operator",
                                "complexity": "medium"
                            },
                            "seg_1_2": {
                                "type": "operator",
                                "complexity": "high"
                            },
                            "seg_1_3": {
                                "type": "aiModel",
                                "complexity": "medium"
                            }
                        },
                        "nodes": [
                            {
                                "id": "branch_1_work",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Success_1",
                                    "output_key": "branch_1_result"
                                }
                            },
                            {
                                "id": "branch_1_work_2",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": true,
                                    "output_key": "branch_1_completed"
                                }
                            }
                        ]
                    },
                    {
                        "branch_id": "branch_2",
                        "total_segments": 20,
                        "partition_map": {
                            "seg_2_1": {
                                "type": "operator",
                                "complexity": "high"
                            },
                            "seg_2_2": {
                                "type": "aiModel",
                                "complexity": "high"
                            },
                            "seg_2_3": {
                                "type": "operator",
                                "complexity": "medium"
                            }
                        },
                        "nodes": [
                            {
                                "id": "branch_2_work",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Success_2",
                                    "output_key": "branch_2_result"
                                }
                            },
                            {
                                "id": "branch_2_work_2",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": true,
                                    "output_key": "branch_2_completed"
                                }
                            }
                        ]
                    },
                    {
                        "branch_id": "branch_3",
                        "total_segments": 18,
                        "partition_map": {
                            "seg_3_1": {
                                "type": "aiModel",
                                "complexity": "high"
                            },
                            "seg_3_2": {
                                "type": "operator",
                                "complexity": "medium"
                            }
                        },
                        "nodes": [
                            {
                                "id": "branch_3_work",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Success_3",
                                    "output_key": "branch_3_result"
                                }
                            },
                            {
                                "id": "branch_3_work_2",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": true,
                                    "output_key": "branch_3_completed"
                                }
                            }
                        ]
                    },
                    {
                        "branch_id": "branch_4",
                        "total_segments": 22,
                        "partition_map": {
                            "seg_4_1": {
                                "type": "operator",
                                "complexity": "very_high"
                            },
                            "seg_4_2": {
                                "type": "aiModel",
                                "complexity": "high"
                            }
                        },
                        "nodes": [
                            {
                                "id": "branch_4_work",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Success_4",
                                    "output_key": "branch_4_result"
                                }
                            },
                            {
                                "id": "branch_4_work_2",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": true,
                                    "output_key": "branch_4_completed"
                                }
                            }
                        ]
                    },
                    {
                        "branch_id": "branch_5",
                        "total_segments": 25,
                        "partition_map": {
                            "seg_5_1": {
                                "type": "aiModel",
                                "complexity": "very_high"
                            },
                            "seg_5_2": {
                                "type": "operator",
                                "complexity": "high"
                            }
                        },
                        "nodes": [
                            {
                                "id": "branch_5_work",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Success_5",
                                    "output_key": "branch_5_result"
                                }
                            },
                            {
                                "id": "branch_5_work_2",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": true,
                                    "output_key": "branch_5_completed"
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": "parallel_aggregator",
            "type": "aggregator",
            "config": {
                "code": "print('복잡한 병렬 결과 집계 중...')\n# Aggregator 로직은 segment_runner_handler에서 처리됨"
            }
        },
        {
            "id": "parallel_validator",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": "SUCCESS: 복잡한 5개 브랜치 병렬 처리 성공",
                "output_key": "TEST_RESULT"
            }
        },
        {
            "id": "parallel_validator_2",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": "PASSED",
                "output_key": "VALIDATION_STATUS"
            }
        }
    ],
    "edges": [
        {
            "source": "parallel_prep",
            "target": "parallel_prep_2"
        },
        {
            "source": "parallel_prep_2",
            "target": "parallel_prep_3"
        },
        {
            "source": "parallel_prep_3",
            "target": "parallel_prep_4"
        },
        {
            "source": "parallel_validator",
            "target": "parallel_validator_2"
        },
        {
            "source": "parallel_prep_4",
            "target": "complex_parallel_group",
            "type": "normal"
        },
        {
            "source": "complex_parallel_group",
            "target": "parallel_aggregator",
            "type": "normal"
        },
        {
            "source": "parallel_aggregator",
            "target": "parallel_validator",
            "type": "normal"
        }
    ],
    "start_node": "parallel_prep"
}