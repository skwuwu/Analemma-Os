{
    "id": "MULTIMODAL_VISION_OS_TEST",
    "workflow_name": "Multimodal Vision OS Stability Test",
    "description": "Production-mode Gemini Vision API test: real LLM call + sets-based state injection. No code blocks — runs without MOCK_MODE.",
    "version": "3.0.0",
    "test_category": "multimodal_os_stability",
    "nodes": [
        {
            "id": "vision_prep",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "vision_prep_done"
            },
            "label": "Vision 입력 준비 (sets)"
        },
        {
            "id": "memory_estimation_check",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "memory_estimation_check_done"
            },
            "label": "[Check] 메모리 추정 메타데이터 주입 (sets)"
        },
        {
            "id": "vision_analysis",
            "type": "aiModel",
            "label": "Vision 분석 (Gemini Vision 실제 호출)",
            "config": {
                "model": "gemini-1.5-pro-vision",
                "max_tokens": 2000,
                "temperature": 0.3,
                "multimodal": true,
                "vision_enabled": true,
                "output_key": "vision_analysis_result",
                "prompt": "제품 이미지를 분석하여 다음 항목을 한국어로 응답하세요:\n1. 제품 명칭\n2. 주요 특징 (최대 5가지)\n3. 색상\n4. 예상 가격대\n\n이미지: {vision_input.image_uri}"
            }
        },
        {
            "id": "security_guard_check",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "security_guard_check_done"
            },
            "label": "[Check] 보안 검사 실행 표시 (sets)"
        },
        {
            "id": "state_offloading_check",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "state_offloading_check_done"
            },
            "label": "[Check] State 오프로드 실행 표시 (sets)"
        },
        {
            "id": "vision_validator",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "vision_validator_done"
            },
            "label": "통합 검증 완료 표시 (sets)"
        }
    ],
    "edges": [
        {
            "source": "vision_prep",
            "target": "memory_estimation_check"
        },
        {
            "source": "memory_estimation_check",
            "target": "vision_analysis"
        },
        {
            "source": "vision_analysis",
            "target": "security_guard_check"
        },
        {
            "source": "security_guard_check",
            "target": "state_offloading_check"
        },
        {
            "source": "state_offloading_check",
            "target": "vision_validator"
        }
    ],
    "start_node": "vision_prep",
    "metadata": {
        "test_features": [
            "multimodal_vision",
            "real_gemini_api_call",
            "sets_only_operators",
            "production_mode_compatible"
        ],
        "expected_behavior": "Gemini Vision API called with real image URI. All operator nodes use sets shorthand — no code execution required.",
        "production_mode": true
    }
}