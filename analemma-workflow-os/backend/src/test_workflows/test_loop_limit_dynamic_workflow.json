{
    "workflow_name": "Dynamic Loop Limit Test - 30 Iterations",
    "description": "Tests dynamic loop limit calculation: 3 nodes × 30 iterations = 90 weighted executions",
    "nodes": [
        {
            "id": "prep",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "test_started"
            },
            "label": "Test Preparation"
        },
        {
            "id": "prep_2",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": 0,
                "output_key": "counter"
            }
        },
        {
            "id": "prep_3",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": [
                    0,
                    1,
                    2,
                    3,
                    4,
                    5,
                    6,
                    7,
                    8,
                    9,
                    10,
                    11,
                    12,
                    13,
                    14,
                    15,
                    16,
                    17,
                    18,
                    19,
                    20,
                    21,
                    22,
                    23,
                    24,
                    25,
                    26,
                    27,
                    28,
                    29
                ],
                "output_key": "loop_items"
            }
        },
        {
            "id": "heavy_loop",
            "type": "for_each",
            "label": "Heavy Loop - 30 Iterations × 3 Nodes",
            "config": {
                "input_list_key": "loop_items",
                "max_iterations": 30,
                "output_key": "loop_results",
                "sub_workflow": {
                    "nodes": [
                        {
                            "id": "loop_node_1",
                            "type": "operator_official",
                            "config": {
                                "strategy": "echo",
                                "input": true,
                                "output_key": "step_1_done"
                            }
                        },
                        {
                            "id": "loop_node_2",
                            "type": "operator_official",
                            "config": {
                                "strategy": "echo",
                                "input": true,
                                "output_key": "step_2_done"
                            }
                        },
                        {
                            "id": "loop_node_3",
                            "type": "operator_official",
                            "config": {
                                "strategy": "echo",
                                "input": true,
                                "output_key": "step_3_done"
                            }
                        }
                    ],
                    "edges": [
                        {
                            "source": "loop_node_1",
                            "target": "loop_node_2"
                        },
                        {
                            "source": "loop_node_2",
                            "target": "loop_node_3"
                        }
                    ],
                    "start_node": "loop_node_1"
                }
            }
        },
        {
            "id": "count_loop_iterations",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input_key": "heavy_loop_iteration_count",
                "output_key": "loop_count"
            },
            "label": "루프 실행 횟수 측정 (커널 보증)"
        },
        {
            "id": "validator",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": "PASS: Dynamic loop limit test completed",
                "output_key": "TEST_RESULT"
            },
            "label": "Validate Dynamic Limit Calculation"
        },
        {
            "id": "validator_2",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": true,
                "output_key": "test_passed"
            }
        }
    ],
    "edges": [
        {
            "source": "prep",
            "target": "prep_2"
        },
        {
            "source": "prep_2",
            "target": "prep_3"
        },
        {
            "source": "validator",
            "target": "validator_2"
        },
        {
            "source": "prep_3",
            "target": "heavy_loop"
        },
        {
            "source": "heavy_loop",
            "target": "count_loop_iterations"
        },
        {
            "source": "count_loop_iterations",
            "target": "validator"
        }
    ],
    "start_node": "prep",
    "metadata": {
        "test_features": [
            "dynamic_loop_limit",
            "weighted_execution_calculation",
            "for_each_segment_counting"
        ],
        "expected_behavior": "System calculates max_loop_iterations = 90 + 20% ≈ 108+, workflow completes without LoopLimitExceeded"
    }
}