{
    "workflow_name": "Dynamic Loop Limit Test",
    "description": "동적 루프 제한 테스트 - 워크플로우 복잡도 기반 제한값 검증",
    "nodes": [
        {
            "id": "loop_limit_prep",
            "type": "operator",
            "config": {
                "code": "print(\"동적 루프 제한 테스트 준비\")\nstate['loop_limit_test_started'] = True\nstate['total_segments'] = 15\nstate['expected_max_loop'] = state['total_segments'] + 20\nstate['expected_max_branch_loop'] = state['total_segments'] + 10\nresult = {\n    'test_type': 'loop_limit_dynamic',\n    'total_segments': state['total_segments'],\n    'expected_max_loop': state['expected_max_loop'],\n    'expected_max_branch_loop': state['expected_max_branch_loop'],\n    'dynamic_calculation': True\n}\nstate['prep_result'] = result\nprint(f\"루프 제한 계산 완료: {state['expected_max_loop']}회\")",
                "output_key": "prep_result"
            }
        },
        {
            "id": "loop_simulation_step1",
            "type": "operator",
            "config": {
                "code": "print(\"루프 시뮬레이션 1단계\")\nstate['loop_step_1_completed'] = state.get('loop_limit_test_started', False)\nstate['current_loop_count'] = 1\nstate['step1_result'] = {'step': 1, 'completed': state['loop_step_1_completed']}\nprint(f\"1단계: {state['loop_step_1_completed']}\")",
                "output_key": "step1_result"
            }
        },
        {
            "id": "loop_simulation_step2",
            "type": "operator",
            "config": {
                "code": "print(\"루프 시뮬레이션 2단계\")\nstate['loop_step_2_completed'] = state.get('loop_step_1_completed', False)\nstate['current_loop_count'] = 2\nstate['step2_result'] = {'step': 2, 'completed': state['loop_step_2_completed']}\nprint(f\"2단계: {state['loop_step_2_completed']}\")",
                "output_key": "step2_result"
            }
        },
        {
            "id": "loop_simulation_step3",
            "type": "operator",
            "config": {
                "code": "print(\"루프 시뮬레이션 3단계\")\nstate['loop_step_3_completed'] = state.get('loop_step_2_completed', False)\nstate['current_loop_count'] = 3\nstate['step3_result'] = {'step': 3, 'completed': state['loop_step_3_completed']}\nprint(f\"3단계: {state['loop_step_3_completed']}\")",
                "output_key": "step3_result"
            }
        },
        {
            "id": "loop_limit_validator",
            "type": "operator",
            "config": {
                "code": "print(\"검증 시작\")\nall_passed = all([\n    state.get('loop_limit_test_started'),\n    state.get('loop_step_1_completed'),\n    state.get('loop_step_2_completed'),\n    state.get('loop_step_3_completed'),\n    state.get('current_loop_count', 0) <= state.get('expected_max_loop', 100)\n])\nstate['VALIDATION_STATUS'] = 'PASSED' if all_passed else 'FAILED'\nstate['TEST_RESULT'] = f'Loop limit test: {state[\"VALIDATION_STATUS\"]}'\nprint(f\"검증 결과: {state['VALIDATION_STATUS']}\")"
            }
        }
    ],
    "edges": [
        {
            "source": "loop_limit_prep",
            "target": "loop_simulation_step1",
            "type": "normal"
        },
        {
            "source": "loop_simulation_step1",
            "target": "loop_simulation_step2",
            "type": "normal"
        },
        {
            "source": "loop_simulation_step2",
            "target": "loop_simulation_step3",
            "type": "normal"
        },
        {
            "source": "loop_simulation_step3",
            "target": "loop_limit_validator",
            "type": "normal"
        }
    ],
    "start_node": "loop_limit_prep"
}