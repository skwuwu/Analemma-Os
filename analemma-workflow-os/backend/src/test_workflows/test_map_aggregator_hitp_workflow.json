{
    "workflow_name": "Map Aggregator HITP Test",
    "description": "Map State Aggregation 후 HITP(일시정지) 로직 검증",
    "nodes": [
        {
            "id": "parallel_node",
            "type": "parallel_group",
            "config": {
                "branches": [
                    {
                        "branch_id": "branch_1",
                        "nodes": [
                            {
                                "id": "b1_step1",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Hello from Branch 1",
                                    "output_key": "data_1"
                                }
                            }
                        ]
                    },
                    {
                        "branch_id": "branch_2",
                        "nodes": [
                            {
                                "id": "b2_step1",
                                "type": "operator_official",
                                "config": {
                                    "strategy": "echo",
                                    "input": "Hello from Branch 2",
                                    "output_key": "data_2"
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": "aggregator_node",
            "type": "aggregator",
            "config": {
                "code": "print('Aggregating...')"
            }
        },
        {
            "id": "validator_node",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": "✅ SUCCESS: 모든 브랜치 결과 집계됨",
                "output_key": "TEST_RESULT"
            }
        },
        {
            "id": "hitp_approval_node",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": "Aggregation 완료. TEST_RESULT를 확인하고 승인하세요.",
                "output_key": "hitp_message"
            }
        },
        {
            "id": "hitp_approval_node_2",
            "type": "operator_official",
            "config": {
                "strategy": "echo",
                "input": {
                    "status": "awaiting_human_approval"
                },
                "output_key": "hitp_result"
            }
        }
    ],
    "edges": [
        {
            "source": "hitp_approval_node",
            "target": "hitp_approval_node_2"
        },
        {
            "source": "parallel_node",
            "target": "aggregator_node"
        },
        {
            "source": "aggregator_node",
            "target": "validator_node"
        },
        {
            "source": "validator_node",
            "target": "hitp_approval_node",
            "type": "hitp"
        }
    ],
    "start_node": "parallel_node"
}