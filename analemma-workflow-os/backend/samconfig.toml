# SAM CLI Configuration File
# Parameters defined here are applied automatically on every deployment.
# This prevents CORS settings from being reset.
#
# WARNING: This file is NOT used during GitHub Actions deployments.
#    CI/CD deployments pass parameters directly in .github/workflows/backend-deploy.yml
#    This file is only used when running `sam deploy` locally.

version = 0.1

[default]
[default.global.parameters]
stack_name = "backend"

[default.deploy.parameters]
capabilities = "CAPABILITY_IAM CAPABILITY_AUTO_EXPAND"
confirm_changeset = true
resolve_s3 = true

# CORS allowed origins (same values used in GitHub Actions)
# CloudFront production + local development
parameter_overrides = """
  StageName=dev \
  AllowedOrigins=https://d22tnxagg6c5pz.cloudfront.net,http://localhost:3000,http://localhost:5173
"""

# Production environment example (uncomment to use)
# [prod]
# [prod.deploy.parameters]
# stack_name = "backend-prod"
# parameter_overrides = """
#   StageName=prod \
#   AllowedOrigins=https://d22tnxagg6c5pz.cloudfront.net \
# """
